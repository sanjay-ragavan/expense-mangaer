{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Paper,Typography,CircularProgress,useTheme}from'@mui/material';import{Chart as ChartJS,ArcElement,Tooltip,Legend,CategoryScale,LinearScale,BarElement,Title}from'chart.js';import{Pie,Bar}from'react-chartjs-2';import{getExpenseSummary}from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend,CategoryScale,LinearScale,BarElement,Title);const CategoryChart=()=>{const[summary,setSummary]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const theme=useTheme();useEffect(()=>{fetchSummary();},[]);const fetchSummary=async()=>{try{const data=await getExpenseSummary();setSummary(data);setError(null);}catch(err){setError('Failed to fetch expense summary');console.error('Error fetching expense summary:',err);}finally{setLoading(false);}};const chartData={labels:summary.map(item=>item.category),datasets:[{data:summary.map(item=>item.total),backgroundColor:[theme.palette.primary.main,theme.palette.secondary.main,theme.palette.error.main,theme.palette.warning.main,theme.palette.info.main,theme.palette.success.main,theme.palette.grey[500]],borderWidth:1}]};const chartOptions={responsive:true,plugins:{legend:{position:'right'},title:{display:true,text:'Expenses by Category'}}};const barData={labels:summary.map(item=>item.category),datasets:[{label:'Amount',data:summary.map(item=>item.total),backgroundColor:theme.palette.primary.main}]};const barOptions={responsive:true,plugins:{legend:{display:false},title:{display:true,text:'Expenses by Category'}},scales:{y:{beginAtZero:true,ticks:{callback:function(tickValue){return\"$\".concat(tickValue);}}}}};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",p:3,children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Typography,{color:\"error\",variant:\"body1\",align:\"center\",children:error});}return/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Expense Summary\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:{xs:'column',md:'row'},gap:3,children:[/*#__PURE__*/_jsx(Box,{flex:1,children:/*#__PURE__*/_jsx(Pie,{data:chartData,options:chartOptions})}),/*#__PURE__*/_jsx(Box,{flex:1,children:/*#__PURE__*/_jsx(Bar,{data:barData,options:barOptions})})]})]});};export default CategoryChart;","map":{"version":3,"names":["React","useState","useEffect","Box","Paper","Typography","CircularProgress","useTheme","Chart","ChartJS","ArcElement","Tooltip","Legend","CategoryScale","LinearScale","BarElement","Title","Pie","Bar","getExpenseSummary","jsx","_jsx","jsxs","_jsxs","register","CategoryChart","summary","setSummary","loading","setLoading","error","setError","theme","fetchSummary","data","err","console","chartData","labels","map","item","category","datasets","total","backgroundColor","palette","primary","main","secondary","warning","info","success","grey","borderWidth","chartOptions","responsive","plugins","legend","position","title","display","text","barData","label","barOptions","scales","y","beginAtZero","ticks","callback","tickValue","concat","justifyContent","p","children","color","variant","align","elevation","sx","mb","gutterBottom","flexDirection","xs","md","gap","flex","options"],"sources":["C:/Users/sanja/OneDrive/Desktop/New folder/frontend/src/components/CategoryChart.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  CircularProgress,\r\n  useTheme\r\n} from '@mui/material';\r\nimport {\r\n  Chart as ChartJS,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title\r\n} from 'chart.js';\r\nimport { Pie, Bar } from 'react-chartjs-2';\r\nimport { getExpenseSummary } from '../api/api';\r\n\r\nChartJS.register(\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title\r\n);\r\n\r\nconst CategoryChart: React.FC = () => {\r\n  const [summary, setSummary] = useState<Array<{ category: string; total: number }>>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    fetchSummary();\r\n  }, []);\r\n\r\n  const fetchSummary = async () => {\r\n    try {\r\n      const data = await getExpenseSummary();\r\n      setSummary(data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to fetch expense summary');\r\n      console.error('Error fetching expense summary:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const chartData = {\r\n    labels: summary.map((item) => item.category),\r\n    datasets: [\r\n      {\r\n        data: summary.map((item) => item.total),\r\n        backgroundColor: [\r\n          theme.palette.primary.main,\r\n          theme.palette.secondary.main,\r\n          theme.palette.error.main,\r\n          theme.palette.warning.main,\r\n          theme.palette.info.main,\r\n          theme.palette.success.main,\r\n          theme.palette.grey[500]\r\n        ],\r\n        borderWidth: 1\r\n      }\r\n    ]\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'right' as const\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: 'Expenses by Category'\r\n      }\r\n    }\r\n  };\r\n\r\n  const barData = {\r\n    labels: summary.map((item) => item.category),\r\n    datasets: [\r\n      {\r\n        label: 'Amount',\r\n        data: summary.map((item) => item.total),\r\n        backgroundColor: theme.palette.primary.main\r\n      }\r\n    ]\r\n  };\r\n\r\n  const barOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        display: false\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: 'Expenses by Category'\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        ticks: {\r\n          callback: function(tickValue: string | number) {\r\n            return `$${tickValue}`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" p={3}>\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Typography color=\"error\" variant=\"body1\" align=\"center\">\r\n        {error}\r\n      </Typography>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ p: 3, mb: 3 }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Expense Summary\r\n      </Typography>\r\n      <Box display=\"flex\" flexDirection={{ xs: 'column', md: 'row' }} gap={3}>\r\n        <Box flex={1}>\r\n          <Pie data={chartData} options={chartOptions} />\r\n        </Box>\r\n        <Box flex={1}>\r\n          <Bar data={barData} options={barOptions} />\r\n        </Box>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default CategoryChart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}